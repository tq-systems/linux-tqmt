// SPDX-License-Identifier: GPL-2.0-or-later
/*
 * TQMT1040 on STKT104x with serdes configuration 0x66 Device Tree Source
 *
 * Copyright (c) 2016-2023 TQ-Systems GmbH <license@tq-group.com>, D-82229 Seefeld, Germany.
 * Copyright 2014 Freescale Semiconductor Inc.
 * Author: Stefan Lange, Max Merchel, Gregor Herburger
 *
 */

#include "t104xsi-pre.dtsi"

#include "tqmt10xx.dtsi"
#include "stkt104x.dtsi"

/ {
	model = "TQ TQMT1040 on STKT104x";
	compatible = "tq,tqmt1040-stkt104x", "tq,tqmt1040";
};

#include "t1040si-post.dtsi"

&enet0 {
	fixed-link = <0 1 1000 0 0>;
};

&enet2 {
	fixed-link = <1 1 1000 0 0>;
};

&enet1 {
	phy-handle = <&phy_sgmii_1>;
	phy-connection-type = "sgmii";
};

&enet2 {
	phy-handle = <&phy_sgmii_2>;
	phy-connection-type = "sgmii";
};

&enet3 {
	phy-handle = <&phy_rgmii_0>;
	phy-connection-type = "rgmii-id";
};

&enet4 {
	phy-handle = <&phy_rgmii_1>;
	phy-connection-type = "rgmii-id";
};

&mdio0 {
	phy_sgmii_0 {
		status = "disabled";
	};
	phy_sgmii_2 {
		status = "disabled";
	};
	phy_qsgmii_0: ethernet-phy@1C {
		reg = <0x1C>;
		interrupts = <9 1 0 0>;
	};
	phy_qsgmii_1: ethernet-phy@1D {
		reg = <0x1D>;
		interrupts = <9 1 0 0>;
	};
	phy_qsgmii_2: ethernet-phy@1E {
		reg = <0x1E>;
		interrupts = <9 1 0 0>;
	};
	phy_qsgmii_3: ethernet-phy@1F {
		reg = <0x1F>;
		interrupts = <9 1 0 0>;
	};
};

&seville_switch {
	status = "okay";
};

&seville_port0 {
	managed = "in-band-status";
	phy-handle = <&phy_qsgmii_0>;
	phy-mode = "qsgmii";
	label = "swp0";
	status = "okay";
};

&seville_port1 {
	managed = "in-band-status";
	phy-handle = <&phy_qsgmii_1>;
	phy-mode = "qsgmii";
	label = "swp1";
	status = "okay";
};

&seville_port2 {
	managed = "in-band-status";
	phy-handle = <&phy_qsgmii_2>;
	phy-mode = "qsgmii";
	label = "swp2";
	status = "okay";
};

&seville_port3 {
	managed = "in-band-status";
	phy-handle = <&phy_qsgmii_3>;
	phy-mode = "qsgmii";
	label = "swp3";
	status = "okay";
};

&seville_port8 {
	ethernet = <&enet0>;
	status = "okay";
};

&pci1 {
	status = "okay";
};

&pci2 {
	status = "okay";
};

&pci3 {
	status = "okay";
};
